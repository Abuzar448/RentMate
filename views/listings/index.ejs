<% layout("/layouts/boilerplate") %>

<!-- Filters Section -->
<div class="filters mt-3 d-flex flex-wrap justify-content-center" id="filters">
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-fire"></i></div>
    <p>Trending</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-bed"></i></div>
    <p>Rooms</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-mountain-city"></i></div>
    <p>Iconic Cities</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-mountain"></i></div>
    <p>Mountains</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-chess-rook"></i></div>
    <p>Castles</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-person-swimming"></i></div>
    <p>Amazing pools</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-campground"></i></div>
    <p>Camping</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-tractor"></i></div>
    <p>Farms</p>
  </div>
  <div class="filter text-center mx-2">
    <div><i class="fa-solid fa-snowflake"></i></div>
    <p>Arctic</p>
  </div>

  <!-- Toggle -->
  <div class="tax-toggle mt-2 w-30 text-center">
    <div class="form-check form-switch d-inline-flex align-items-center">
      <input
        class="form-check-input"
        type="checkbox"
        role="switch"
        id="switchCheckDefault"
      />
      <label class="form-check-label ms-2" for="switchCheckDefault">
        Display total after taxes
      </label>
    </div>
  </div>

</div>

<div class="d-flex align-items-center justify-content-center mt-4 ">
<% if (message) { %>
  <p style="color: red; font-weight: bold;"><%= message %></p>
<% } %>
</div>


<!-- Listings Section -->
<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
  <% for(let listing of alllistings){ %>
  <div class="col">
    <a href="/listings/<%= listing._id %>" class="listing-links text-decoration-none">
      <div class="card mainCard h-100 shadow-sm">
        <img
          src="<%= listing.image.url %>"
          class="card-img-top"
          alt="Listing_Image"
          style="height: 15rem; object-fit: cover; border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem; border-bottom-right-radius: 0; border-bottom-left-radius: 0;"
        />
        <div class="card-body px-2 py-2">
          <p class="card-text text-dark">
            <b><%= listing.title %></b> <br />
            â‚¹ <%= listing.price.toLocaleString('en-IN') %> / night
            <p class="tax-info">+18% GST</p>
          </p>
          

        </div>
      </div>
    </a>
  </div>
  <% } %>
</div>




<script>
  let taxSwitch = document.getElementById("switchCheckDefault");
  taxSwitch.addEventListener("click",()=>{
   let taxtInfo = document.getElementsByClassName("tax-info");
   for(info of taxtInfo){
    if(info.style.display != 'inline'){
      info.style.display = 'inline';
    }
    else{
      info.style.display = 'none';
    }
   }
  })
</script>
